<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CatWar Downloader</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 16px;
        }
        
        .content {
            padding: 25px;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
        }
        
        .tab-button {
            flex: 1;
            padding: 12px;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: #3498db;
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        textarea, input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        textarea {
            height: 150px;
            resize: vertical;
            font-family: monospace;
        }
        
        textarea:focus, input:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .settings-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .settings-row > div {
            flex: 1;
        }
        
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }
        
        .btn-info {
            background: linear-gradient(135deg, #17a2b8, #138496);
        }
        
        .btn-block {
            width: 100%;
        }
        
        .progress-container {
            margin-top: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            display: none;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .log {
            height: 250px;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-top: 15px;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 3px 0;
            line-height: 1.4;
        }
        
        .log-success { color: #2ecc71; }
        .log-error { color: #e74c3c; }
        .log-warning { color: #f39c12; }
        .log-info { color: #3498db; }
        
        .info-box {
            background: #e8f4fd;
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .domain-selector {
            background: #e8f6f3;
            border: 1px solid #1abc9c;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .domain-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .domain-btn {
            flex: 1;
            padding: 10px;
            border: 2px solid #1abc9c;
            background: white;
            color: #1abc9c;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .domain-btn.active {
            background: #1abc9c;
            color: white;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .quick-btn {
            padding: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .costume-btn { background: #3498db; color: white; }
        .odor-btn { background: #9b59b6; color: white; }
        .medal-btn { background: #f1c40f; color: white; }
        .item-btn { background: #e67e22; color: white; }
        .action-btn { background: #e74c3c; color: white; }
        .achievement-btn { background: #2ecc71; color: white; }
        .background-btn { background: #1abc9c; color: white; }
        
        .quick-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
        }

        .phase-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .phase {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            background: #e9ecef;
            color: #6c757d;
            font-weight: 600;
        }

        .phase.active {
            background: #3498db;
            color: white;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .button-group .btn {
            flex: 1;
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
            color: #7f8c8d;
            font-size: 14px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .stat-card {
            background: white;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        .success-rate {
            color: #27ae60;
        }
        
        .error-rate {
            color: #e74c3c;
        }
        
        .check-rate {
            color: #f39c12;
        }

        .status-info {
            background: #e8f4fd;
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .naming-options {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .naming-options label {
            margin-bottom: 5px;
            font-weight: normal;
        }

        .preview-container {
            margin-top: 20px;
            border: 2px dashed #3498db;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
            display: none;
        }

        .preview-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
            text-align: center;
        }

        .preview-images {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
        }

        .preview-image {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 10px;
            background: white;
            text-align: center;
        }

        .preview-image img {
            max-width: 100%;
            max-height: 120px;
            border-radius: 5px;
        }

        .preview-image .filename {
            margin-top: 8px;
            font-size: 11px;
            color: #666;
            word-break: break-all;
        }

        .results-container {
            margin-top: 20px;
            border: 2px dashed #27ae60;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
            display: none;
        }

        .results-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
            text-align: center;
        }

        .results-text {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-buttons .btn {
            flex: 1;
        }

        .archive-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }

        .archive-success h3 {
            color: #155724;
            margin-bottom: 10px;
        }

        .archive-success p {
            color: #155724;
            margin-bottom: 15px;
        }

        .format-options {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê± CatWar Downloader</h1>
            <p>–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å CatWar (catwar.net –∏ catwar.su)</p>
        </div>
        
        <div class="content">
            <div class="warning-box">
                <strong>‚ö†Ô∏è –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong>
                <p>‚Ä¢ <strong>–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –ü–ö</strong> - –±—Ä–∞—É–∑–µ—Ä—ã –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö –º–æ–≥—É—Ç –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–∞–π–ª–æ–≤</p>
                <p>‚Ä¢ <strong>–ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:</strong> –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–æ 1000+ —Ñ–∞–π–ª–æ–≤ –∑–∞ —Ä–∞–∑</p>
                <p>‚Ä¢ <strong>ZIP-–∞—Ä—Ö–∏–≤—ã:</strong> –≤—Å–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ ZIP-–∞—Ä—Ö–∏–≤</p>
            </div>

            <div class="domain-selector">
                <strong>üåê –î–æ–º–µ–Ω CatWar:</strong>
                <div class="domain-buttons">
                    <button class="domain-btn active" onclick="switchDomain('catwar.net')">catwar.net</button>
                    <button class="domain-btn" onclick="switchDomain('catwar.su')">catwar.su</button>
                </div>
            </div>

            <!-- –ü–ï–†–ï–ú–ï–©–ï–ù–û: –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –ø–æ–¥ —Ç–∞–±–∞–º–∏ -->
            <div class="tab-buttons">
                <button class="tab-button active" onclick="switchTab('bbcode')">üìù BB-–∫–æ–¥—ã</button>
                <button class="tab-button" onclick="switchTab('generator')">üéØ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</button>
                <button class="tab-button" onclick="switchTab('mass')">üöÄ –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞</button>
                <button class="tab-button" onclick="switchTab('quick')">‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</button>
            </div>

            <div class="naming-options">
                <strong>üìù –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤:</strong>
                <div class="checkbox-group">
                    <label class="checkbox-item">
                        <input type="radio" name="naming" value="type_id" checked> –¢–∏–ø_ID (costume_1.png)
                    </label>
                    <label class="checkbox-item">
                        <input type="radio" name="naming" value="catwar_type_id"> CatWar_—Ç–∏–ø_ID (CatWar_costume_1.png)
                    </label>
                    <label class="checkbox-item">
                        <input type="radio" name="naming" value="id_only"> –¢–æ–ª—å–∫–æ ID (1.png)
                    </label>
                </div>
            </div>
            
            <!-- TAB 1: BB-CODE -->
            <div id="bbcode" class="tab-content active">
                <div class="form-group">
                    <label>–í—Å—Ç–∞–≤—å—Ç–µ BB-–∫–æ–¥—ã —Å [img]—Å—Å—ã–ª–∫–∞–º–∏[/img]:</label>
                    <textarea id="bbcodeInput" placeholder="[img]https://catwar.net/cw3/cats/0/costume/1.png[/img]
[img]https://catwar.su/cw3/odoroj/1.png[/img]
[img]https://catwar.net/cw3/actions/1.png[/img]"></textarea>
                </div>
                
                <div class="settings-row">
                    <div>
                        <label>–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–º—Å):</label>
                        <input type="number" id="delay1" value="500" min="100" max="5000">
                    </div>
                    <div>
                        <label>–õ–∏–º–∏—Ç —Ñ–∞–π–ª–æ–≤:</label>
                        <input type="number" id="limit1" value="1000" min="1" max="5000">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-success" onclick="parseAndDownloadBBCode()">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å</button>
                    <button class="btn btn-info" onclick="previewBBCode()">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                </div>

                <!-- –ü–†–ï–î–ü–†–û–°–ú–û–¢–† –î–õ–Ø BB-–ö–û–î–û–í -->
                <div class="preview-container" id="bbcodePreview">
                    <div class="preview-title">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>
                    <div class="preview-images" id="bbcodePreviewImages">
                        <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
                    </div>
                </div>
            </div>
            
            <!-- TAB 2: GENERATOR -->
            <div id="generator" class="tab-content">
                <div class="form-group">
                    <label>–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞:</label>
                    <select id="contentType">
                        <option value="costume">üé≠ –ö–æ—Å—Ç—é–º—ã (costume)</option>
                        <option value="odoroj">üëÉ –ó–∞–ø–∞—Ö–∏ (odoroj)</option>
                        <option value="actions">üé¨ –î–µ–π—Å—Ç–≤–∏—è (actions)</option>
                        <option value="achievement">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (achievement)</option>
                        <option value="medal">ü•á –ú–µ–¥–∞–ª–∏ (medal)</option>
                        <option value="spacoj">üé® –§–æ–Ω—ã (spacoj)</option>
                        <option value="things">üéí –ü—Ä–µ–¥–º–µ—Ç—ã (things)</option>
                    </select>
                </div>
                
                <div class="settings-row">
                    <div>
                        <label>ID –æ—Ç:</label>
                        <input type="number" id="startId" value="1" min="1" max="100000">
                    </div>
                    <div>
                        <label>ID –¥–æ:</label>
                        <input type="number" id="endId" value="100" min="1" max="100000">
                    </div>
                </div>
                
                <div class="form-group" id="costumeVersionsContainer">
                    <label>–í–µ—Ä—Å–∏–∏ –∫–æ—Å—Ç—é–º–æ–≤:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="checkbox" name="version" value="0" checked> 0 (—Å—Ç–æ—è—á–∞—è)</label>
                        <label class="checkbox-item"><input type="checkbox" name="version" value="1"> 1 (—Å–ø—è—â–∞—è)</label>
                        <label class="checkbox-item"><input type="checkbox" name="version" value="-1"> -1 (–∫–æ—Ç—è—á—å—è)</label>
                        <label class="checkbox-item"><input type="checkbox" name="version" value="5"> 5 (–ø—å—é—â–∞—è)</label>
                    </div>
                </div>

                <div class="format-options">
                    <strong>üìã –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:</strong>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="radio" name="outputFormat" value="plain" checked> –ü—Ä–æ—Å—Ç—ã–µ —Å—Å—ã–ª–∫–∏
                        </label>
                        <label class="checkbox-item">
                            <input type="radio" name="outputFormat" value="bbcode"> BB-–∫–æ–¥—ã [img][/img]
                        </label>
                    </div>
                </div>

                <div class="settings-row">
                    <div>
                        <label>–ó–∞–¥–µ—Ä–∂–∫–∞ (–º—Å):</label>
                        <input type="number" id="delayGenerator" value="500" min="100" max="5000">
                    </div>
                    <div>
                        <label>–ú–∞–∫—Å–∏–º—É–º —Ñ–∞–π–ª–æ–≤:</label>
                        <input type="number" id="limitGenerator" value="1000" min="1" max="5000">
                    </div>
                </div>

                <!-- –û–¢–î–ï–õ–¨–ù–´–ï –ö–ù–û–ü–ö–ò –î–õ–Ø –†–ï–ñ–ò–ú–û–í –†–ê–ë–û–¢–´ -->
                <div class="button-group">
                    <button class="btn btn-success" onclick="generateAndDownload('download')">üéØ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∫–∞—á–∞—Ç—å</button>
                    <button class="btn btn-info" onclick="generateAndDownload('generate')">üìã –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫</button>
                </div>

                <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ì–ï–ù–ï–†–ê–¶–ò–ò -->
                <div class="results-container" id="generatorResults">
                    <div class="results-title">üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏</div>
                    <div class="results-text" id="generatedUrls"></div>
                    <div class="action-buttons">
                        <button class="btn btn-info" onclick="copyGeneratedUrls()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏</button>
                        <button class="btn btn-success" onclick="downloadGeneratedUrls()">üíæ –°–∫–∞—á–∞—Ç—å –∫–∞–∫ —Ñ–∞–π–ª</button>
                    </div>
                </div>
            </div>

            <!-- TAB 3: MASS DOWNLOAD -->
            <div id="mass" class="tab-content">
                <div class="form-group">
                    <label>ID –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã):</label>
                    <textarea id="massIds" placeholder="1-100
150,155,160
200-300"></textarea>
                </div>

                <div class="form-group">
                    <label>–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞:</label>
                    <select id="massContentType">
                        <option value="costume">üé≠ –ö–æ—Å—Ç—é–º—ã (costume)</option>
                        <option value="odoroj">üëÉ –ó–∞–ø–∞—Ö–∏ (odoroj)</option>
                        <option value="actions">üé¨ –î–µ–π—Å—Ç–≤–∏—è (actions)</option>
                        <option value="achievement">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (achievement)</option>
                        <option value="medal">ü•á –ú–µ–¥–∞–ª–∏ (medal)</option>
                        <option value="spacoj">üé® –§–æ–Ω—ã (spacoj)</option>
                        <option value="things">üéí –ü—Ä–µ–¥–º–µ—Ç—ã (things)</option>
                    </select>
                </div>

                <div class="form-group" id="massCostumeVersionsContainer">
                    <label>–í–µ—Ä—Å–∏–∏ –∫–æ—Å—Ç—é–º–æ–≤:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item"><input type="checkbox" name="massVersion" value="0" checked> 0 (—Å—Ç–æ—è—á–∞—è)</label>
                        <label class="checkbox-item"><input type="checkbox" name="massVersion" value="1"> 1 (—Å–ø—è—â–∞—è)</label>
                        <label class="checkbox-item"><input type="checkbox" name="massVersion" value="-1"> -1 (–∫–æ—Ç—è—á—å—è)</label>
                        <label class="checkbox-item"><input type="checkbox" name="massVersion" value="5"> 5 (–ø—å—é—â–∞—è)</label>
                    </div>
                </div>
                
                <div class="settings-row">
                    <div>
                        <label>–ó–∞–¥–µ—Ä–∂–∫–∞ (–º—Å):</label>
                        <input type="number" id="massDelay" value="300" min="50" max="5000">
                    </div>
                    <div>
                        <label>–ú–∞–∫—Å–∏–º—É–º —Ñ–∞–π–ª–æ–≤:</label>
                        <input type="number" id="massLimit" value="2000" min="1" max="10000">
                    </div>
                </div>
                
                <button class="btn btn-success btn-block" onclick="massDownload()">üöÄ –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞</button>

                <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ú–ê–°–°–û–í–û–ô –ì–ï–ù–ï–†–ê–¶–ò–ò -->
                <div class="results-container" id="massResults">
                    <div class="results-title">üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏</div>
                    <div class="results-text" id="massGeneratedUrls"></div>
                    <div class="action-buttons">
                        <button class="btn btn-info" onclick="copyMassGeneratedUrls()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏</button>
                        <button class="btn btn-success" onclick="downloadMassGeneratedUrls()">üíæ –°–∫–∞—á–∞—Ç—å –∫–∞–∫ —Ñ–∞–π–ª</button>
                    </div>
                </div>
            </div>
            
            <!-- TAB 4: QUICK START -->
            <div id="quick" class="tab-content">
                <div class="quick-actions">
                    <button class="quick-btn costume-btn" onclick="quickDownload('costumes')">üé≠ –ö–æ—Å—Ç—é–º—ã 1-20</button>
                    <button class="quick-btn odor-btn" onclick="quickDownload('odors')">üëÉ –ó–∞–ø–∞—Ö–∏ 1-20</button>
                    <button class="quick-btn medal-btn" onclick="quickDownload('medals')">ü•á –ú–µ–¥–∞–ª–∏ 1-20</button>
                    <button class="quick-btn item-btn" onclick="quickDownload('items')">üéí –ü—Ä–µ–¥–º–µ—Ç—ã 1-20</button>
                    <button class="quick-btn action-btn" onclick="quickDownload('actions')">üé¨ –î–µ–π—Å—Ç–≤–∏—è 1-20</button>
                    <button class="quick-btn achievement-btn" onclick="quickDownload('achievements')">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è 1-20</button>
                    <button class="quick-btn background-btn" onclick="quickDownload('backgrounds')">üé® –§–æ–Ω—ã 1-20</button>
                </div>

                <div class="settings-row">
                    <div>
                        <label>–ó–∞–¥–µ—Ä–∂–∫–∞ (–º—Å):</label>
                        <input type="number" id="delayQuick" value="300" min="50" max="5000">
                    </div>
                </div>

                <button class="btn btn-warning btn-block" onclick="testQuickDownload()">‚ö° –¢–µ—Å—Ç (6 —Ñ–∞–π–ª–æ–≤)</button>
            </div>
            
            <!-- PROGRESS SECTION -->
            <div class="progress-container" id="progressContainer">
                <div class="phase-indicator">
                    <div class="phase" id="phaseCheck">üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤</div>
                    <div class="phase" id="phaseDownload">üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ</div>
                    <div class="phase" id="phaseArchive">üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞</div>
                </div>
                
                <div class="status-info">
                    <strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="currentPhase">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤...</span> | 
                    <strong>–î–æ–º–µ–Ω:</strong> <span id="currentDomainDisplay">catwar.net</span> |
                    <strong>–§–∞–π–ª–æ–≤:</strong> <span id="totalFilesCount">0</span>
                </div>
                
                <div class="progress-header">
                    <div>
                        <strong>–ü—Ä–æ–≥—Ä–µ—Å—Å:</strong> <span id="statusText">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</span>
                    </div>
                    <div>
                        <span id="progressText">0/0</span>
                    </div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value check-rate" id="checkedCount">0</div>
                        <div class="stat-label">–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value success-rate" id="validCount">0</div>
                        <div class="stat-label">–í–∞–ª–∏–¥–Ω—ã–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value error-rate" id="invalidCount">0</div>
                        <div class="stat-label">–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value success-rate" id="downloadedCount">0</div>
                        <div class="stat-label">–°–∫–∞—á–∞–Ω–æ</div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-danger" onclick="stopDownload()" id="stopBtn" disabled>‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                    <button class="btn btn-warning" onclick="skipCurrent()" id="skipBtn" disabled>‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                </div>
                
                <div class="log" id="logContainer"></div>
            </div>

            <!-- –£–°–ü–ï–®–ù–û–ï –°–û–ó–î–ê–ù–ò–ï –ê–†–•–ò–í–ê -->
            <div class="archive-success" id="archiveSuccess">
                <h3>üéâ –ê—Ä—Ö–∏–≤ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</h3>
                <p id="archiveInfo">–§–∞–π–ª—ã –±—ã–ª–∏ —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ ZIP-–∞—Ä—Ö–∏–≤ –∏ —Å–∫–∞—á–∞–Ω—ã</p>
                <button class="btn btn-success" onclick="document.getElementById('archiveSuccess').style.display = 'none'">OK</button>
            </div>

            <div class="footer">
                <p>CatWar Downloader v2.7 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è + –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä + –£–ª—É—á—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</p>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
        const CORS_PROXIES = [
            'https://corsproxy.io/?',
            'https://api.codetabs.com/v1/proxy?quest=',
            'https://cors-anywhere.herokuapp.com/'
        ];

        // ==================== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let allUrls = [];
        let validUrls = [];
        let downloadQueue = [];
        let isChecking = false;
        let isDownloading = false;
        let isArchiving = false;
        let currentIndex = 0;
        let totalFiles = 0;
        let currentProxyIndex = 0;
        let checkedCount = 0;
        let validCount = 0;
        let invalidCount = 0;
        let downloadedCount = 0;
        let abortController = null;
        let currentDomain = 'catwar.net';
        let fileNameFormat = 'type_id';
        let createZipArchives = true; // üîß –í–°–ï–ì–î–ê TRUE
        let downloadedFiles = [];
        let currentSessionType = '';
        let currentMode = 'download';
        let generatedUrls = [];
        let outputFormat = 'plain';

        // ==================== –°–õ–£–ñ–ï–ë–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'generator') {
                const type = document.getElementById('contentType').value;
                document.getElementById('costumeVersionsContainer').style.display = 
                    type === 'costume' ? 'block' : 'none';
            } else if (tabName === 'mass') {
                const type = document.getElementById('massContentType').value;
                document.getElementById('massCostumeVersionsContainer').style.display = 
                    type === 'costume' ? 'block' : 'none';
            }
        }

        function switchDomain(domain) {
            document.querySelectorAll('.domain-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            currentDomain = domain;
        }

        function updateFileNameFormat() {
            const selectedFormat = document.querySelector('input[name="naming"]:checked');
            if (selectedFormat) {
                fileNameFormat = selectedFormat.value;
            }
        }

        function updateOutputFormat() {
            const selectedFormat = document.querySelector('input[name="outputFormat"]:checked');
            if (selectedFormat) {
                outputFormat = selectedFormat.value;
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateFileNameFormat();
            updateOutputFormat();
            
            document.querySelectorAll('input[name="naming"]').forEach(radio => {
                radio.addEventListener('change', updateFileNameFormat);
            });

            document.querySelectorAll('input[name="outputFormat"]').forEach(radio => {
                radio.addEventListener('change', updateOutputFormat);
            });
        });

        function getProxyUrl(url) {
            const separator = CORS_PROXIES[currentProxyIndex].includes('?') ? '&' : '?';
            return CORS_PROXIES[currentProxyIndex] + encodeURIComponent(url);
        }

        function rotateProxy() {
            currentProxyIndex = (currentProxyIndex + 1) % CORS_PROXIES.length;
        }

        function updateStats() {
            document.getElementById('checkedCount').textContent = checkedCount;
            document.getElementById('validCount').textContent = validCount;
            document.getElementById('invalidCount').textContent = invalidCount;
            document.getElementById('downloadedCount').textContent = downloadedCount;
        }

        function setPhase(phase) {
            document.getElementById('phaseCheck').classList.remove('active');
            document.getElementById('phaseDownload').classList.remove('active');
            document.getElementById('phaseArchive').classList.remove('active');
            
            if (phase === 'check') {
                document.getElementById('phaseCheck').classList.add('active');
                document.getElementById('currentPhase').textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤';
            } else if (phase === 'download') {
                document.getElementById('phaseDownload').classList.add('active');
                document.getElementById('currentPhase').textContent = '–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤';
            } else if (phase === 'archive') {
                document.getElementById('phaseArchive').classList.add('active');
                document.getElementById('currentPhase').textContent = '–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞';
            }
        }

        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // ==================== –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô ====================
        async function checkImageExists(url) {
            for (let attempt = 1; attempt <= 3; attempt++) {
                try {
                    const proxyUrl = getProxyUrl(url);
                    
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 10000);
                    
                    const response = await fetch(proxyUrl, {
                        method: 'GET',
                        signal: controller.signal,
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                            'Accept': 'image/*, */*'
                        }
                    });

                    clearTimeout(timeoutId);

                    if (!response.ok) {
                        if (response.status === 404) {
                            return { exists: false, error: '–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω (404)' };
                        } else {
                            throw new Error(`HTTP ${response.status}`);
                        }
                    }

                    const blob = await response.blob();
                    
                    if (blob.size <= 305) {
                        return { exists: false, error: `–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: ${blob.size} –±–∞–π—Ç` };
                    }

                    return { 
                        exists: true, 
                        size: blob.size,
                        type: response.headers.get('content-type') || 'unknown'
                    };

                } catch (error) {
                    if (error.name === 'AbortError') {
                        addLog(`‚è∞ –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ–ø—ã—Ç–∫–∞ ${attempt})`, 'warning');
                    } else {
                        addLog(`‚ùå –û—à–∏–±–∫–∞ (–ø–æ–ø—ã—Ç–∫–∞ ${attempt}): ${error.message}`, 'error');
                    }
                    
                    if (attempt < 3) {
                        rotateProxy();
                        await new Promise(resolve => setTimeout(resolve, 1000));
                    } else {
                        return { exists: false, error: error.message };
                    }
                }
            }
            return { exists: false, error: '–í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å' };
        }

        // ==================== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –§–ê–ô–õ–ê–ú–ò ====================
        function getContentTypeFromUrl(url) {
            if (url.includes('/costume/')) return 'costume';
            if (url.includes('/odoroj/')) return 'odoroj';
            if (url.includes('/actions/')) return 'action';
            if (url.includes('/achievement/')) return 'achievement';
            if (url.includes('/medal/')) return 'medal';
            if (url.includes('/spacoj/')) return 'spacoj';
            if (url.includes('/things/')) return 'item';
            return 'other';
        }

        function getFileExtension(url) {
            if (url.includes('/spacoj/')) {
                return 'jpg';
            }
            return 'png';
        }

        function extractIdFromUrl(url) {
            const matches = url.match(/\/(\d+)\.(png|jpg)$/);
            return matches ? matches[1] : 'unknown';
        }

        function createDownloadFilename(url) {
            const contentType = getContentTypeFromUrl(url);
            const id = extractIdFromUrl(url);
            const extension = getFileExtension(url);
            
            switch(fileNameFormat) {
                case 'type_id':
                    return `${contentType}_${id}.${extension}`;
                case 'catwar_type_id':
                    return `CatWar_${contentType}_${id}.${extension}`;
                case 'id_only':
                    return `${id}.${extension}`;
                default:
                    return `${contentType}_${id}.${extension}`;
            }
        }

        // üîß –£–õ–£–ß–®–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø ZIP-–ê–†–•–ò–í–ê
        async function createSingleZipArchive(files, archiveName) {
            setPhase('archive');
            document.getElementById('statusText').textContent = `–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞: ${archiveName}`;
            document.getElementById('progressFill').style.width = '100%';
            
            addLog(`üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–≥–æ –∞—Ä—Ö–∏–≤–∞: ${archiveName}`, 'info');
            addLog(`üìÅ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ ${files.length} —Ñ–∞–π–ª–æ–≤ –≤ –∞—Ä—Ö–∏–≤...`, 'info');
            
            try {
                const zip = new JSZip();
                
                for (const file of files) {
                    zip.file(file.name, file.blob);
                    addLog(`üìÑ –î–æ–±–∞–≤–ª–µ–Ω: ${file.name}`, 'info');
                }
                
                addLog(`‚öôÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ZIP-–∞—Ä—Ö–∏–≤–∞...`, 'info');
                
                const content = await zip.generateAsync({
                    type: "blob",
                    compression: "DEFLATE",
                    compressionOptions: { level: 6 }
                });
                
                addLog(`üíæ –†–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞: ${formatFileSize(content.size)}`, 'info');
                
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = archiveName;
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                setTimeout(() => URL.revokeObjectURL(link.href), 100);
                
                // üîß –ü–û–ö–ê–ó–´–í–ê–ï–ú –ö–†–ê–°–ò–í–û–ï –°–û–û–ë–©–ï–ù–ò–ï –û–ë –£–°–ü–ï–•–ï
                showArchiveSuccess(archiveName, files.length, content.size);
                
                addLog(`‚úÖ –ï–¥–∏–Ω—ã–π –∞—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω: ${archiveName}`, 'success');
                return true;
                
            } catch (error) {
                addLog(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞: ${error.message}`, 'error');
                return false;
            }
        }

        // üîß –ù–û–í–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–û–ö–ê–ó–ê –£–°–ü–ï–®–ù–û–ì–û –°–û–ó–î–ê–ù–ò–Ø –ê–†–•–ò–í–ê
        function showArchiveSuccess(archiveName, fileCount, archiveSize) {
            const archiveSuccess = document.getElementById('archiveSuccess');
            const archiveInfo = document.getElementById('archiveInfo');
            
            archiveInfo.innerHTML = `
                <strong>–ò–º—è –∞—Ä—Ö–∏–≤–∞:</strong> ${archiveName}<br>
                <strong>–§–∞–π–ª–æ–≤ –≤ –∞—Ä—Ö–∏–≤–µ:</strong> ${fileCount}<br>
                <strong>–†–∞–∑–º–µ—Ä –∞—Ä—Ö–∏–≤–∞:</strong> ${formatFileSize(archiveSize)}
            `;
            
            archiveSuccess.style.display = 'block';
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                archiveSuccess.style.display = 'none';
            }, 10000);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê BB-–ö–û–î–û–í
        async function previewBBCode() {
            const bbcodeText = document.getElementById('bbcodeInput').value;
            const limit = parseInt(document.getElementById('limit1').value) || 1000;

            const urls = [];
            const imgRegex = /\[img\](.*?)\[\/img\]/g;
            let match;

            while ((match = imgRegex.exec(bbcodeText)) !== null && urls.length < limit) {
                const url = match[1].trim();
                if (url.startsWith('http')) {
                    urls.push(url);
                }
            }

            if (urls.length === 0) {
                alert('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤–∞–ª–∏–¥–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ BB-–∫–æ–¥–∞—Ö');
                return;
            }

            const previewContainer = document.getElementById('bbcodePreview');
            const previewImages = document.getElementById('bbcodePreviewImages');
            
            previewContainer.style.display = 'block';
            previewImages.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–≤—å—é...</div>';

            let loadedCount = 0;
            let html = '';

            // üîß –£–ë–ò–†–ê–ï–ú –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –í 50 –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô - –ó–ê–ì–†–£–ñ–ê–ï–ú –í–°–ï
            for (let i = 0; i < urls.length; i++) {
                const url = urls[i];
                const filename = createDownloadFilename(url);
                
                try {
                    const proxyUrl = getProxyUrl(url);
                    const response = await fetch(proxyUrl);
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const blobUrl = URL.createObjectURL(blob);
                        
                        html += `
                            <div class="preview-image">
                                <img src="${blobUrl}" alt="${filename}" onload="URL.revokeObjectURL(this.src)">
                                <div class="filename">${filename}</div>
                            </div>
                        `;
                        
                        loadedCount++;
                    }
                } catch (error) {
                    html += `
                        <div class="preview-image">
                            <div style="color: #e74c3c; padding: 20px;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>
                            <div class="filename">${filename}</div>
                        </div>
                    `;
                }

                // üîß –û–ë–ù–û–í–õ–Ø–ï–ú –ü–†–û–ì–†–ï–°–° –ö–ê–ñ–î–´–ï 10 –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô
                if (i % 10 === 0 || i === urls.length - 1) {
                    previewImages.innerHTML = html + `<div style="text-align: center; padding: 10px; color: #666;">–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${loadedCount}/${urls.length}</div>`;
                }
                
                // üîß –ù–ï–ë–û–õ–¨–®–ê–Ø –ó–ê–î–ï–†–ñ–ö–ê –ß–¢–û–ë–´ –ù–ï –ü–ï–†–ï–ì–†–£–ñ–ê–¢–¨
                await new Promise(resolve => setTimeout(resolve, 100));
            }

            previewImages.innerHTML = html + `<div style="text-align: center; padding: 10px; color: #27ae60; font-weight: bold;">‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: ${loadedCount} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>`;
        }

        // üîß –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –ì–ï–ù–ï–†–ò–†–û–í–ê–ù–ù–´–ú–ò –°–°–´–õ–ö–ê–ú–ò
        function showGeneratedUrls(urls, containerId, textAreaId) {
            const container = document.getElementById(containerId);
            const textArea = document.getElementById(textAreaId);
            
            // üîß –ü–†–ï–û–ë–†–ê–ó–£–ï–ú –°–°–´–õ–ö–ò –í –ù–£–ñ–ù–´–ô –§–û–†–ú–ê–¢
            let urlsText;
            if (outputFormat === 'bbcode') {
                urlsText = urls.map(url => `[img]${url}[/img]`).join('\n');
            } else {
                urlsText = urls.join('\n');
            }
            
            textArea.textContent = urlsText;
            container.style.display = 'block';
            
            generatedUrls = urls;
        }

        function copyGeneratedUrls() {
            let urlsText;
            if (outputFormat === 'bbcode') {
                urlsText = generatedUrls.map(url => `[img]${url}[/img]`).join('\n');
            } else {
                urlsText = generatedUrls.join('\n');
            }
            
            navigator.clipboard.writeText(urlsText).then(() => {
                alert('‚úÖ –°—Å—ã–ª–∫–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            }).catch(() => {
                alert('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫–∏');
            });
        }

        function downloadGeneratedUrls() {
            let urlsText;
            if (outputFormat === 'bbcode') {
                urlsText = generatedUrls.map(url => `[img]${url}[/img]`).join('\n');
            } else {
                urlsText = generatedUrls.join('\n');
            }
            
            const blob = new Blob([urlsText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `CatWar_urls_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
            link.click();
            URL.revokeObjectURL(url);
        }

        function copyMassGeneratedUrls() {
            copyGeneratedUrls();
        }

        function downloadMassGeneratedUrls() {
            downloadGeneratedUrls();
        }

        // ==================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò –°–ö–ê–ß–ò–í–ê–ù–ò–Ø ====================
        async function processCheckQueue(urls, delay) {
            if (!isChecking || currentIndex >= urls.length) {
                if (currentIndex >= urls.length) {
                    finishCheckPhase();
                }
                return;
            }

            const url = urls[currentIndex];
            const filename = createDownloadFilename(url);

            const progress = ((currentIndex + 1) / totalFiles) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentIndex + 1}/${totalFiles}`;
            document.getElementById('statusText').textContent = `–ü—Ä–æ–≤–µ—Ä–∫–∞: ${filename}`;

            try {
                addLog(`üîç –ü—Ä–æ–≤–µ—Ä–∫–∞: ${filename}`, 'info');
                
                const result = await checkImageExists(url);
                
                checkedCount++;
                
                if (result.exists) {
                    validUrls.push(url);
                    validCount++;
                    addLog(`‚úÖ –í–∞–ª–∏–¥–Ω—ã–π: ${filename} (${result.size} –±–∞–π—Ç)`, 'success');
                } else {
                    invalidCount++;
                    addLog(`‚ùå –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π: ${filename} - ${result.error}`, 'error');
                }

            } catch (error) {
                if (error.name !== 'AbortError') {
                    checkedCount++;
                    invalidCount++;
                    addLog(`üí• –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: ${filename} - ${error.message}`, 'error');
                }
            }

            updateStats();
            currentIndex++;

            if (currentIndex < urls.length && isChecking) {
                setTimeout(() => processCheckQueue(urls, delay), delay);
            } else {
                finishCheckPhase();
            }
        }

        function finishCheckPhase() {
            isChecking = false;
            
            if (validUrls.length > 0) {
                addLog(`üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í–∞–ª–∏–¥–Ω—ã—Ö: ${validUrls.length}/${allUrls.length}`, 'success');
                
                if (currentMode === 'generate') {
                    const activeTab = document.querySelector('.tab-content.active').id;
                    
                    if (activeTab === 'generator') {
                        showGeneratedUrls(validUrls, 'generatorResults', 'generatedUrls');
                    } else if (activeTab === 'mass') {
                        showGeneratedUrls(validUrls, 'massResults', 'massGeneratedUrls');
                    }
                    
                    addLog(`üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ${validUrls.length} —Å—Å—ã–ª–æ–∫`, 'success');
                    return;
                }
                
                addLog(`üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ...`, 'info');
                currentSessionType = getContentTypeFromUrl(validUrls[0]);
                downloadedFiles = [];
                
                setTimeout(() => startDownloadPhase(validUrls), 1000);
            } else {
                document.getElementById('statusText').textContent = '–ù–µ—Ç –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤';
                document.getElementById('stopBtn').disabled = true;
                document.getElementById('skipBtn').disabled = true;
                addLog('üí• –ù–µ—Ç –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è', 'error');
            }
        }

        async function downloadImage(url, filename) {
            for (let attempt = 1; attempt <= 3; attempt++) {
                try {
                    const proxyUrl = getProxyUrl(url);
                    const downloadFilename = createDownloadFilename(url);
                    
                    addLog(`üì• –°–∫–∞—á–∏–≤–∞–Ω–∏–µ: ${filename}`, 'info');
                    
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 15000);
                    
                    const response = await fetch(proxyUrl, {
                        signal: controller.signal,
                        headers: {
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
                            'Accept': 'image/*, */*'
                        }
                    });

                    clearTimeout(timeoutId);

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    const blob = await response.blob();
                    
                    if (blob.size <= 305) {
                        throw new Error('–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞');
                    }

                    downloadedFiles.push({
                        name: downloadFilename,
                        blob: blob,
                        url: url
                    });
                    
                    return { success: true, size: blob.size };

                } catch (error) {
                    if (error.name === 'AbortError') {
                        addLog(`‚èπÔ∏è –û—Ç–º–µ–Ω–µ–Ω–æ: ${filename}`, 'warning');
                        throw error;
                    }
                    
                    addLog(`‚ùå –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (–ø–æ–ø—ã—Ç–∫–∞ ${attempt}): ${error.message}`, 'error');
                    
                    if (attempt < 3) {
                        rotateProxy();
                        await new Promise(resolve => setTimeout(resolve, 1000));
                    }
                }
            }
            return { success: false, size: 0 };
        }

        async function processDownloadQueue(urls, delay) {
            if (!isDownloading || currentIndex >= urls.length) {
                if (currentIndex >= urls.length) {
                    finishDownloadPhase();
                }
                return;
            }

            const url = urls[currentIndex];
            const filename = createDownloadFilename(url);

            let currentDelay = delay;
            if (urls.length > 50 && currentIndex % 50 === 0 && currentIndex > 0) {
                addLog(`‚è∏Ô∏è –ê–≤—Ç–æ-–ø–∞—É–∑–∞ –ø–æ—Å–ª–µ 50 —Ñ–∞–π–ª–æ–≤...`, 'warning');
                await new Promise(resolve => setTimeout(resolve, 2000));
            }

            const progress = ((currentIndex + 1) / urls.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${currentIndex + 1}/${urls.length}`;
            document.getElementById('statusText').textContent = `–°–∫–∞—á–∏–≤–∞–Ω–∏–µ: ${filename}`;

            try {
                const result = await downloadImage(url, filename);
                
                if (result.success) {
                    downloadedCount++;
                    addLog(`‚úÖ –°–∫–∞—á–∞–Ω: ${filename} (${result.size} –±–∞–π—Ç)`, 'success');
                } else {
                    addLog(`üí• –ù–µ —Å–∫–∞—á–∞–Ω: ${filename}`, 'error');
                }

            } catch (error) {
                if (error.name !== 'AbortError') {
                    addLog(`üí• –û—à–∏–±–∫–∞: ${filename} - ${error.message}`, 'error');
                }
            }

            updateStats();
            currentIndex++;

            if (currentIndex < urls.length && isDownloading) {
                setTimeout(() => processDownloadQueue(urls, currentDelay), currentDelay);
            } else {
                finishDownloadPhase();
            }
        }

        function startDownloadPhase(urls) {
            setPhase('download');
            
            downloadQueue = urls;
            currentIndex = 0;
            isDownloading = true;

            document.getElementById('progressText').textContent = `0/${urls.length}`;
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('statusText').textContent = '–ù–∞—á–∞–ª–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è...';

            const delay = getCurrentDelay();
            processDownloadQueue(urls, delay);
        }

        async function finishDownloadPhase() {
            isDownloading = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            
            // üîß –í–°–ï–ì–î–ê –°–û–ó–î–ê–ï–ú ZIP-–ê–†–•–ò–í
            if (downloadedFiles.length > 0) {
                const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
                const archiveName = `CatWar_${currentSessionType}_${downloadedFiles.length}files_${timestamp}.zip`;
                
                await createSingleZipArchive(downloadedFiles, archiveName);
                downloadedFiles = [];
            }
            
            const successRate = validUrls.length > 0 ? Math.round((downloadedCount / validUrls.length) * 100) : 0;
            
            document.getElementById('statusText').textContent = 
                `–ó–∞–≤–µ—Ä—à–µ–Ω–æ! –°–∫–∞—á–∞–Ω–æ: ${downloadedCount}/${validUrls.length} (${successRate}%)`;
            addLog(`üéâ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã!`, 'success');
        }

        function stopDownload() {
            isChecking = false;
            isDownloading = false;
            isArchiving = false;
            if (abortController) {
                abortController.abort();
            }
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('skipBtn').disabled = true;
            document.getElementById('statusText').textContent = '–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º';
            addLog('‚èπÔ∏è –ü—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω', 'warning');
        }

        function skipCurrent() {
            if (isChecking || isDownloading) {
                currentIndex++;
                addLog('‚è≠Ô∏è –¢–µ–∫—É—â–∏–π —Ñ–∞–π–ª –ø—Ä–æ–ø—É—â–µ–Ω', 'warning');
                updateStats();
            }
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–û–¶–ï–°–°–ê ====================
        function startCheckPhase(urls, delay) {
            allUrls = urls;
            validUrls = [];
            checkedCount = 0;
            validCount = 0;
            invalidCount = 0;
            downloadedCount = 0;
            currentIndex = 0;
            totalFiles = urls.length;
            currentProxyIndex = 0;
            isChecking = true;
            isDownloading = false;
            isArchiving = false;

            document.getElementById('progressContainer').style.display = 'block';
            document.getElementById('progressText').textContent = `0/${totalFiles}`;
            document.getElementById('totalFilesCount').textContent = totalFiles;
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('statusText').textContent = '–ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏...';
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('skipBtn').disabled = false;
            
            document.getElementById('currentDomainDisplay').textContent = currentDomain;

            document.getElementById('logContainer').innerHTML = '';

            setPhase('check');
            updateStats();
            
            addLog(`üîç –ù–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏: ${totalFiles} —Ñ–∞–π–ª–æ–≤`, 'info');
            addLog(`üåê –î–æ–º–µ–Ω: ${currentDomain}`, 'info');
            addLog(`üìù –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω: ${getFileNameFormatName()}`, 'info');
            addLog(`‚öôÔ∏è –†–µ–∂–∏–º: ${currentMode === 'download' ? '–°–∫–∞—á–∏–≤–∞–Ω–∏–µ' : '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫'}`, 'info');

            processCheckQueue(urls, delay);
        }

        function getFileNameFormatName() {
            switch(fileNameFormat) {
                case 'type_id': return '–¢–∏–ø_ID';
                case 'catwar_type_id': return 'CatWar_—Ç–∏–ø_ID';
                case 'id_only': return '–¢–æ–ª—å–∫–æ ID';
                default: return '–¢–∏–ø_ID';
            }
        }

        function getCurrentDelay() {
            const activeTab = document.querySelector('.tab-content.active').id;
            switch(activeTab) {
                case 'bbcode': return parseInt(document.getElementById('delay1').value) || 500;
                case 'generator': return parseInt(document.getElementById('delayGenerator').value) || 500;
                case 'mass': return parseInt(document.getElementById('massDelay').value) || 300;
                case 'quick': return parseInt(document.getElementById('delayQuick').value) || 300;
                default: return 500;
            }
        }

        // ==================== –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê ====================
        function parseAndDownloadBBCode() {
            const bbcodeText = document.getElementById('bbcodeInput').value;
            const delay = parseInt(document.getElementById('delay1').value) || 500;
            const limit = parseInt(document.getElementById('limit1').value) || 1000;

            const urls = [];
            const imgRegex = /\[img\](.*?)\[\/img\]/g;
            let match;

            while ((match = imgRegex.exec(bbcodeText)) !== null && urls.length < limit) {
                const url = match[1].trim();
                if (url.startsWith('http')) {
                    urls.push(url);
                }
            }

            if (urls.length === 0) {
                alert('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤–∞–ª–∏–¥–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ BB-–∫–æ–¥–∞—Ö');
                return;
            }

            currentMode = 'download';
            startCheckPhase(urls.slice(0, limit), delay);
        }

        // üîß –ò–ó–ú–ï–ù–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ì–ï–ù–ï–†–ê–¢–û–†–ê
        function generateAndDownload(mode) {
            const type = document.getElementById('contentType').value;
            const startId = parseInt(document.getElementById('startId').value) || 1;
            const endId = parseInt(document.getElementById('endId').value) || 100;
            const delay = parseInt(document.getElementById('delayGenerator').value) || 500;
            const limit = parseInt(document.getElementById('limitGenerator').value) || 1000;

            const urls = generateUrls(type, startId, endId, limit);
            
            if (urls.length === 0) {
                alert('‚ùå –ù–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ URL');
                return;
            }

            currentMode = mode;
            startCheckPhase(urls, delay);
        }

        function massDownload() {
            const idsText = document.getElementById('massIds').value;
            const type = document.getElementById('massContentType').value;
            const delay = parseInt(document.getElementById('massDelay').value) || 300;
            const limit = parseInt(document.getElementById('massLimit').value) || 2000;

            const ids = parseMassIds(idsText);
            
            if (ids.length === 0) {
                alert('‚ùå –ù–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ ID');
                return;
            }

            const urls = generateUrlsFromIds(type, ids, limit);
            
            if (urls.length === 0) {
                alert('‚ùå –ù–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ URL');
                return;
            }

            currentMode = 'download';
            startCheckPhase(urls, delay);
        }

        function parseMassIds(idsText) {
            const ids = new Set();
            const lines = idsText.split('\n').map(line => line.trim()).filter(line => line);
            
            for (const line of lines) {
                if (line.includes('-')) {
                    const [start, end] = line.split('-').map(num => parseInt(num.trim()));
                    if (!isNaN(start) && !isNaN(end) && start <= end) {
                        for (let i = start; i <= end; i++) {
                            ids.add(i);
                        }
                    }
                }
                else if (line.includes(',')) {
                    const numbers = line.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num));
                    numbers.forEach(num => ids.add(num));
                }
                else {
                    const num = parseInt(line);
                    if (!isNaN(num)) {
                        ids.add(num);
                    }
                }
            }
            
            return Array.from(ids).sort((a, b) => a - b);
        }

        function generateUrls(type, startId, endId, limit) {
            const urls = [];
            const basePaths = {
                costume: 'cats/{X}/costume/',
                odoroj: 'odoroj/',
                actions: 'actions/',
                achievement: 'achievement/',
                medal: 'medal/', // üîß –ú–ï–î–ê–õ–ò –ë–ï–ó CW3
                spacoj: 'spacoj/',
                things: 'things/'
            };

            const domains = [currentDomain];
            
            if (type === 'costume') {
                const versions = Array.from(document.querySelectorAll('input[name="version"]:checked'))
                    .map(input => input.value);
                
                if (versions.length === 0) {
                    alert('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –∫–æ—Å—Ç—é–º–∞');
                    return [];
                }
                
                domains.forEach(domain => {
                    versions.forEach(version => {
                        for (let id = startId; id <= endId && urls.length < limit; id++) {
                            urls.push(`https://${domain}/cw3/${basePaths.costume.replace('{X}', version)}${id}.png`);
                        }
                    });
                });
            } else {
                const basePath = basePaths[type];
                const extension = type === 'spacoj' ? 'jpg' : 'png';
                // üîß –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –ò –ú–ï–î–ê–õ–ò –ë–ï–ó CW3
                const baseUrl = (type === 'achievement' || type === 'medal') ? '' : 'cw3/';
                
                domains.forEach(domain => {
                    for (let id = startId; id <= endId && urls.length < limit; id++) {
                        urls.push(`https://${domain}/${baseUrl}${basePath}${id}.${extension}`);
                    }
                });
            }

            return [...new Set(urls)].slice(0, limit);
        }

        function generateUrlsFromIds(type, ids, limit) {
            const urls = [];
            const basePaths = {
                costume: 'cats/{X}/costume/',
                odoroj: 'odoroj/',
                actions: 'actions/',
                achievement: 'achievement/',
                medal: 'medal/', // üîß –ú–ï–î–ê–õ–ò –ë–ï–ó CW3
                spacoj: 'spacoj/',
                things: 'things/'
            };

            const domains = [currentDomain];
            
            if (type === 'costume') {
                const versions = Array.from(document.querySelectorAll('input[name="massVersion"]:checked'))
                    .map(input => input.value);
                
                if (versions.length === 0) {
                    alert('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –∫–æ—Å—Ç—é–º–∞');
                    return [];
                }
                
                domains.forEach(domain => {
                    versions.forEach(version => {
                        for (const id of ids) {
                            if (urls.length < limit) {
                                urls.push(`https://${domain}/cw3/${basePaths.costume.replace('{X}', version)}${id}.png`);
                            }
                        }
                    });
                });
            } else {
                const basePath = basePaths[type];
                const extension = type === 'spacoj' ? 'jpg' : 'png';
                // üîß –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –ò –ú–ï–î–ê–õ–ò –ë–ï–ó CW3
                const baseUrl = (type === 'achievement' || type === 'medal') ? '' : 'cw3/';
                
                domains.forEach(domain => {
                    for (const id of ids) {
                        if (urls.length < limit) {
                            urls.push(`https://${domain}/${baseUrl}${basePath}${id}.${extension}`);
                        }
                    }
                });
            }

            return [...new Set(urls)].slice(0, limit);
        }

        function quickDownload(type) {
            const basePaths = {
                costumes: 'cats/0/costume/',
                odors: 'odoroj/',
                medals: 'medal/', // üîß –ú–ï–î–ê–õ–ò –ë–ï–ó CW3
                items: 'things/',
                actions: 'actions/',
                achievements: 'achievement/',
                backgrounds: 'spacoj/'
            };
            
            const domains = [currentDomain];
            const urls = [];
            const count = 20;
            
            domains.forEach(domain => {
                for (let i = 1; i <= count && urls.length < count; i++) {
                    const extension = type === 'backgrounds' ? 'jpg' : 'png';
                    // üîß –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –ò –ú–ï–î–ê–õ–ò –ë–ï–ó CW3
                    const baseUrl = (type === 'achievements' || type === 'medals') ? '' : 'cw3/';
                    urls.push(`https://${domain}/${baseUrl}${basePaths[type]}${i}.${extension}`);
                }
            });
            
            const delay = parseInt(document.getElementById('delayQuick').value) || 300;
            
            if (urls.length === 0) {
                alert('‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏');
                return;
            }

            currentMode = 'download';
            startCheckPhase(urls.slice(0, count), delay);
        }

        function testQuickDownload() {
            const testUrls = [
                'https://catwar.net/cw3/cats/0/costume/1.png',
                'https://catwar.su/cw3/cats/0/costume/2.png',
                'https://catwar.net/cw3/cats/0/costume/3.png',
                'https://catwar.su/cw3/odoroj/1.png',
                'https://catwar.net/cw3/odoroj/2.png',
                'https://catwar.su/cw3/actions/1.png',
                'https://catwar.net/achievement/12.png',
                'https://catwar.su/medal/1.png' // üîß –¢–ï–°–¢ –ú–ï–î–ê–õ–ò
            ];
            const delay = parseInt(document.getElementById('delayQuick').value) || 300;

            currentMode = 'download';
            startCheckPhase(testUrls, delay);
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('logContainer').innerHTML = '';
            
            addLog('üîß CatWar Downloader –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ', 'info');
            addLog('üí° –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ 1000+ —Ñ–∞–π–ª–æ–≤', 'info');
            addLog('üé® –§–æ–Ω—ã —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è "spacoj"', 'success');
            addLog('üì¶ –í—Å–µ —Ñ–∞–π–ª—ã —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ ZIP-–∞—Ä—Ö–∏–≤', 'info');
            addLog('üé≠ –í–µ—Ä—Å–∏—è –∫–æ—Å—Ç—é–º–æ–≤ 5 (–ø—å—é—â–∞—è) –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
            addLog('üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ', 'success');
            addLog('ü•á –ú–µ–¥–∞–ª–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–±–µ–∑ cw3)', 'success');
            addLog('üëÅÔ∏è –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π', 'info');
            addLog('üìã –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: BB-–∫–æ–¥—ã –∏ –ø—Ä–æ—Å—Ç—ã–µ —Å—Å—ã–ª–∫–∏', 'info');
            
            document.getElementById('contentType').addEventListener('change', function() {
                document.getElementById('costumeVersionsContainer').style.display = 
                    this.value === 'costume' ? 'block' : 'none';
            });

            document.getElementById('massContentType').addEventListener('change', function() {
                document.getElementById('massCostumeVersionsContainer').style.display = 
                    this.value === 'costume' ? 'block' : 'none';
            });
        });
    </script>
</body>
</html>
